<!-- Dashboard Content -->
  <!-- Top Header Bar -->
  <header class="bg-white border-b border-gray-200 px-4 sm:px-6 lg:px-8 py-4">
    <div class="flex items-center justify-between">
      <div class="min-w-0 flex-1">
        <h1 class="text-xl sm:text-2xl font-bold text-gray-900 truncate">
          Welcome back, <%= user.name %>!
        </h1>
        <p class="text-gray-600 text-xs sm:text-sm mt-1">Ready to find your calm?</p>
      </div>
      <div class="flex items-center gap-2 sm:gap-4 ml-4">
        <!-- Notification Bell -->
        <a href="/notifications" class="relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors">
          <i class="fas fa-bell text-lg sm:text-xl"></i>
          <span class="absolute top-1 right-1 w-2 h-2 bg-purple-600 rounded-full"></span>
        </a>
        <!-- User Profile -->
        <div class="flex items-center gap-2 sm:gap-3 pl-2 sm:pl-4 border-l border-gray-200">
          <div class="text-right hidden sm:block">
            <p class="text-xs sm:text-sm font-semibold text-gray-900"><%= user.name %></p>
            <p class="text-xs text-gray-500">Patient</p>
          </div>
          <img
            src="<%= user.profile_image || '/images/default-avatar.png' %>"
            alt="Profile"
            class="w-8 h-8 sm:w-10 sm:h-10 rounded-full border-2 border-purple-200"
          />
        </div>
      </div>
    </div>
  </header>

  <!-- Dashboard Content -->
  <div class="p-4 sm:p-6 lg:p-8">
    <div class="max-w-7xl mx-auto space-y-6 lg:space-y-8">
        <div class="container mx-auto px-0 sm:px-2 lg:px-4 py-4 sm:py-6 lg:py-8">
            <!-- Quote Section -->
            <div class="relative overflow-hidden rounded-xl sm:rounded-2xl bg-gradient-to-br from-purple-500 via-purple-600 to-blue-600 p-4 sm:p-6 lg:p-8 shadow-xl">
              <div class="relative z-10 flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4">
                <div class="flex-1">
                  <div class="flex items-center gap-3 mb-3 sm:mb-4">
                    <h3 class="text-white font-semibold text-base sm:text-lg">Daily Inspiration</h3>
                  </div>
                  <div id="daily-quote-content">
                    <!-- Quote will be loaded by quotes.js -->
                    <div class="flex items-start gap-3 mt-2">
                      <div class="w-8 h-8 rounded-full bg-white/20 flex-shrink-0"></div>
                      <div class="flex-1">
                        <p class="text-white/90 italic">Loading quote...</p>
                        <p class="text-white/70 text-sm mt-1">â€” Loading...</p>
                      </div>
                    </div>
                  </div>
                </div>
                <button
                  id="refresh-quote-btn"
                  class="bg-white/20 hover:bg-white/30 text-white p-3 rounded-full transition-all duration-200 hover:scale-110"
                  title="Refresh Quote"
                >
                  <i class="fas fa-sync-alt text-lg"></i>
                </button>
              </div>
              <!-- Decorative elements -->
              <div class="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-32 -mt-32"></div>
              <div class="absolute bottom-0 left-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -ml-32 -mb-32"></div>
            </div>

            <!-- Music Categories Section -->
            <section>
              <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-gray-900">Music Categories</h2>
                <a href="/music" class="text-purple-600 hover:text-purple-700 font-medium text-sm flex items-center gap-2">
                  View all
                  <i class="fas fa-arrow-right"></i>
                </a>
              </div>

              <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6">
                <!-- Deep Focus Category -->
                <div class="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 group">
                  <div class="aspect-square bg-gradient-to-br from-gray-100 to-gray-200 relative overflow-hidden">
                    <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuCJL54fHWNnO9WumAI1oM-bXcWdj1yJ92cS6Fl5M9mWukHFRDSb2GUXaXWjiNPJKf-kRJ2_lAsuhkhXUVFmbfF9FXFUgRe6pIwRiZIqwbM3a3nN0xBRO02rWg4TWllfMlRk8xyGZbCT70EcdKo-skekWodaXnrNjECZ87JzFHs7xqmkDj7vM4oWNAeiWv9Yk6u9TbbqUc4ZM1e9AphySCXTW0RBYmqGMWVH1AtbnrivO20Lzxbu8EhGa6184H47BS3q4ph302f_oSg" alt="Deep Focus" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
                    <div class="hidden w-full h-full items-center justify-center">
                      <i class="fas fa-brain text-6xl text-gray-400"></i>
                    </div>
                  </div>
                  <div class="p-5">
                    <h3 class="text-lg font-bold text-gray-900 mb-2">Deep Focus</h3>
                    <p class="text-sm text-gray-600 mb-4">Music to help you concentrate.</p>
                    <button onclick="playCategory('focus')" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center gap-2 group-hover:scale-105">
                      <i class="fas fa-play text-sm"></i>
                      Play
                    </button>
                  </div>
                </div>

                <!-- Anxiety Relief Category -->
                <div class="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 group">
                  <div class="aspect-square bg-gradient-to-br from-orange-100 to-orange-200 relative overflow-hidden">
                    <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuB59ZP2ccwMwHfDo_3gyGXKZaDey-M59kCWPpHcARvugqbPhHnzUMPhJkXCAwfEFxvUEwO0IHZ7V-EQkaQty31fcq1_sZV8rUVLxXlsRWBLxnbzuztMkwUgQLhxYIKSAFiSG8fSytPG-zxQDL9XCaPBTkCeH4BjLshfyc4H39ai4AoAZ5TsxNyI_U30XqbM6Qe_D5WXhWG9NYPia8CVM76rb2ROuj7xact9tPMWeqxsTlXt1IG213iMzhD1Sphg07OsJP7REsPCqMY" alt="Anxiety Relief" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
                    <div class="hidden w-full h-full items-center justify-center">
                      <i class="fas fa-heart text-6xl text-orange-400"></i>
                    </div>
                  </div>
                  <div class="p-5">
                    <h3 class="text-lg font-bold text-gray-900 mb-2">Anxiety Relief</h3>
                    <p class="text-sm text-gray-600 mb-4">Calm your mind and find peace.</p>
                    <button onclick="playCategory('anxiety')" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center gap-2 group-hover:scale-105">
                      <i class="fas fa-play text-sm"></i>
                      Play
                    </button>
                  </div>
                </div>

                <!-- Sleep Sounds Category -->
                <div class="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 group">
                  <div class="aspect-square bg-gradient-to-br from-blue-100 to-blue-200 relative overflow-hidden">
                    <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuDmnDEUuiWgWaceFRFQOBDui5Zod0PcELhfob18yBucZ6vTXDKeVEl43mTK_av4zzUW2-JWJPZUbzNpN_ItElvvaWOzg5BHnfn5We9HDOtsUkDlM-tDjKeN5uMHeixJFADNJeTjV6S7fix7ckajIlRgnfir5h07d0-BUYmyDDuRSguos97-dXDjI_JIfqRwFwuv0GYQ_L4rVCOXDDTpSPVbLu4NFvV8X6Dy1NshkgIkbDky0-2dMHtwzTjRY9B8f97MPYyLfk1VWvc" alt="Sleep Sounds" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
                    <div class="hidden w-full h-full items-center justify-center">
                      <i class="fas fa-moon text-6xl text-blue-400"></i>
                    </div>
                  </div>
                  <div class="p-5">
                    <h3 class="text-lg font-bold text-gray-900 mb-2">Sleep Sounds</h3>
                    <p class="text-sm text-gray-600 mb-4">Drift away with gentle sounds.</p>
                    <button onclick="playCategory('sleep')" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center gap-2 group-hover:scale-105">
                      <i class="fas fa-play text-sm"></i>
                      Play
                    </button>
                  </div>
                </div>

                <!-- Meditation Music Category -->
                <div class="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 group">
                  <div class="aspect-square bg-gradient-to-br from-green-100 to-green-200 relative overflow-hidden">
                    <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuDbutCHfslFuQG9psspYm3pSyl9pfrL0IinG261voZDwetkwRtH60Jklsg8IWwIjQW3Eya_EUpEYg8s_u2-eKdUqjhbKoo4_xSK__DjtyCkY9B4ORCvMufiNgo93JLCsuSiY4qrXA-3jQh6dnC_Ki1hrKYgkrFKwbTphRn7WLH6jnhh0hNKLVVLMsv_24SfdIyG-Bm8XQMFwpMAFyQqMvDDMg-mZN2N5p6ruG_oj-KonAuydlL8sQMe8jEao3zQrfz4GlqvtGFhQKQ" alt="Meditation Music" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
                    <div class="hidden w-full h-full items-center justify-center">
                      <i class="fas fa-spa text-6xl text-green-400"></i>
                    </div>
                  </div>
                  <div class="p-5">
                    <h3 class="text-lg font-bold text-gray-900 mb-2">Meditation Music</h3>
                    <p class="text-sm text-gray-600 mb-4">For your daily mindfulness practice.</p>
                    <button onclick="playCategory('meditation')" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center gap-2 group-hover:scale-105">
                      <i class="fas fa-play text-sm"></i>
                      Play
                    </button>
                  </div>
                </div>
              </div>
            </section>

            <!-- Your Next Session Section -->
            <section>
              <h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-4 sm:mb-6">Your Next Session</h2>
              <div class="bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-sm border border-gray-100">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                  <div class="flex items-center gap-3 sm:gap-4">
                    <div class="w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0">
                      <i class="fas fa-user-md text-xl sm:text-2xl text-purple-600"></i>
                    </div>
                    <div class="min-w-0 flex-1">
                      <h3 class="text-lg sm:text-xl font-bold text-gray-900 truncate">
                        <%= typeof nextAppointment !== 'undefined' && nextAppointment ? nextAppointment.therapist_name : 'Dr. Evelyn Reed' %>
                      </h3>
                      <p class="text-gray-600 mt-1 text-sm sm:text-base">
                        <%= typeof nextAppointment !== 'undefined' && nextAppointment ?
                          new Date(nextAppointment.appointment_date).toLocaleDateString('en-US', {
                            weekday: 'long',
                            month: 'long',
                            day: 'numeric'
                          }) + ' at ' + new Date('1970-01-01T' + nextAppointment.appointment_time).toLocaleTimeString('en-US', {
                            hour: 'numeric',
                            minute: '2-digit',
                            hour12: true
                          }) :
                          'Tomorrow at 2:00 PM' %>
                      </p>
                    </div>
                  </div>
                  <div class="flex gap-2 sm:gap-3 flex-shrink-0">
                    <button class="px-3 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg sm:rounded-xl font-semibold transition-colors duration-200">
                      Reschedule
                    </button>
                    <button class="px-3 sm:px-6 py-2 sm:py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg sm:rounded-xl font-semibold transition-colors duration-200 flex items-center gap-2 text-xs sm:text-sm">
                      <i class="fas fa-video"></i>
                      <span class="hidden sm:inline">Join Call</span>
                      <span class="sm:hidden">Join</span>
                    </button>
                  </div>
                </div>
              </div>
            </section>
          </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="/js/quotes.js"></script>
  <script>
    // Music category playback functions
    function playCategory(category) {
      // Redirect to music page with category filter
      window.location.href = `/music?category=${category}`;
    }
  </script>
